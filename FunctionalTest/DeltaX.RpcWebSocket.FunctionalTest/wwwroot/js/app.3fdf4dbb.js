(function(e){function t(t){for(var r,i,u=t[0],a=t[1],s=t[2],p=0,b=[];p<u.length;p++)i=u[p],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&b.push(c[i][0]),c[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);l&&l(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var a=n[u];0!==c[a]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},c={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0e3a":function(e,t,n){"use strict";n("bc21")},"523e":function(e,t,n){"use strict";n("7762")},7762:function(e,t,n){},bc21:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function c(e,t,n,c,o,i){var u=Object(r["l"])("WebSocketDemo");return Object(r["f"])(),Object(r["c"])(u,{msg:"Welcome to Your Vue.js + TypeScript App"})}var o=n("d4ec"),i=n("262e"),u=n("2caf"),a=n("9ab4"),s=n("ce1f"),l=Object(r["q"])("data-v-335d4f1c");Object(r["i"])("data-v-335d4f1c");var p={class:"hello"},b=Object(r["e"])("h1",null,"RtView",-1),f=Object(r["e"])("label",{for:"topicWrite"},"Topic Write:",-1),d=Object(r["e"])("label",{for:"valueWrite"},"Value:",-1),O=Object(r["e"])("label",{for:"topicSubscribe"},"Topic Subscribe (Expression):",-1),h={style:{width:"100%"}},v=Object(r["e"])("thead",null,[Object(r["e"])("th",null,"Tag Name"),Object(r["e"])("th",null,"Status"),Object(r["e"])("th",null,"Value"),Object(r["e"])("th",null,"Updated")],-1),j={key:0};Object(r["g"])();var m=l((function(e,t,n,c,o,i){return Object(r["f"])(),Object(r["c"])("div",p,[b,Object(r["e"])("form",null,[f,Object(r["o"])(Object(r["e"])("input",{id:"topicWrite",type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.topicWrite=t})},null,512),[[r["n"],e.topicWrite]]),d,Object(r["o"])(Object(r["e"])("input",{id:"valueWrite",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.valueWrite=t})},null,512),[[r["n"],e.valueWrite]]),Object(r["e"])("button",{onClick:t[3]||(t[3]=Object(r["p"])((function(t){return e.SetTag()}),["prevent"]))},"Set Tag")]),Object(r["e"])("form",null,[O,Object(r["o"])(Object(r["e"])("input",{id:"topicSubscribe",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.topicSubscribe=t})},null,512),[[r["n"],e.topicSubscribe]]),Object(r["e"])("button",{onClick:t[5]||(t[5]=Object(r["p"])((function(t){return e.SubscribeTopic()}),["prevent"]))},"Subscribe Topic")]),Object(r["e"])("table",h,[v,e.topics?(Object(r["f"])(),Object(r["c"])("tbody",j,[(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["k"])(e.topics,(function(e){return Object(r["f"])(),Object(r["c"])("tr",{key:e.tagName},[Object(r["e"])("td",null,Object(r["m"])(e.tagName),1),Object(r["e"])("td",null,Object(r["m"])(e.status),1),Object(r["e"])("td",null,Object(r["m"])(e.value),1),Object(r["e"])("td",null,Object(r["m"])(e.updated),1)])})),128))])):Object(r["d"])("",!0)])])})),g=n("bee2"),y=(n("99af"),n("c740"),n("4160"),n("a630"),n("d81d"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),w=n("3f10"),S=function(e){Object(i["a"])(n,e);var t=Object(u["a"])(n);function n(e,c){var i;return Object(o["a"])(this,n),i=t.call(this,e,c),i.timeout=1e4,i.KnownTopics=[],i.IsConnected=!1,i.Topics=Object(r["j"])({}),i.Topics.value=[],i.on("open",i.RtOnOpen),i.on("close",i.RtOnClose),i.on("rt.notify.tags",i.RtOnNotifyTags),i}return Object(g["a"])(n,[{key:"RtOnClose",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("rt on close:"),this.IsConnected=!1,this.emit("rt.disconnected");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"RtOnOpen",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("rt on open:",t),this.IsConnected=!0,e.next=4,this.RtGetTopics();case 4:this.emit("rt.connected");case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"RtGetTopics",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("call RtGetTopics"),e.next=3,this.call("rpc.rt.get_topics",[],this.timeout);case 3:return t=e.sent,console.log("call RtGetTopics result",t),this.KnownTopics=t,e.abrupt("return",this.KnownTopics);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"RtOnNotifyTags",value:function(e){var t=this;console.log("rt notify.tags result.tags:",e.tags),e.tags.forEach((function(e){var n=t.Topics.value.findIndex((function(t){return t.tagName==e.tagName}));n>=0?t.Topics.value[n]=e:t.Topics.value.push(e)}))}},{key:"RtSubscribe",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("rpc.rt.subscribe topics",t),e.next=3,this.call("rpc.rt.subscribe",t,this.timeout);case 3:n=e.sent,console.log("rpc.rt.subscribe resultTags",n),this.RtOnNotifyTags(n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"RtAddSubscribe",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,r,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.findIndex((function(e){return c.Topics.value.findIndex((function(t){return t.tagName==e}))<0}))<0)){e.next=2;break}return e.abrupt("return");case 2:return n=Array.from(new Set(t.concat(this.Topics.value.map((function(e){return e.tagName}))))),console.log("******** RtAddSubscribe topics",n),e.next=6,this.call("rpc.rt.subscribe",n,this.timeout);case 6:r=e.sent,console.log("RtAddSubscribe resultTags",r),this.RtOnNotifyTags(r);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"RtSetValues",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("send RtSetValues",t),e.next=3,this.call("rpc.rt.set_value",t,this.timeout);case 3:return n=e.sent,console.log("receive RtSetValues",n),r=t.map((function(e){return e.topic})),this.RtAddSubscribe(r),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(w["Client"]),R="https:"===document.location.protocol?"wss":"ws",T=document.location.port?":"+document.location.port:"",k=R+"://"+document.location.hostname+T+"/rt",x=new S(k),W=x,V=W;V.on("rt.connected",(function(){console.log("open from vue (rt.connected)"),V.RtSubscribe(V.KnownTopics)})),setTimeout((function(){console.log("call RtSetValues"),V.RtSetValues([{topic:"feedUpdated",value:123456},{topic:"powerTag",value:5454},{topic:"setFromVue2",value:new Date}]).then((function(e){console.log("Sum result",e)}))}),2e3);var N=function(e){Object(i["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.topics=W.Topics,e.topicWrite="",e.valueWrite="",e.topicSubscribe="",e}return Object(g["a"])(n,[{key:"SetTag",value:function(){W.RtSetValues([{topic:this.topicWrite,value:this.valueWrite}]),this.valueWrite=""}},{key:"SubscribeTopic",value:function(){W.RtAddSubscribe([this.topicSubscribe]),this.topicSubscribe=""}}]),n}(s["b"]);N=Object(a["a"])([Object(s["a"])({props:{msg:String}})],N);var _=N;n("523e");_.render=m,_.__scopeId="data-v-335d4f1c";var C=_,A=function(e){Object(i["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(s["b"]);A=Object(a["a"])([Object(s["a"])({components:{WebSocketDemo:C}})],A);var I=A;n("0e3a");I.render=c;var P=I;Object(r["b"])(P).mount("#app")}});
//# sourceMappingURL=app.3fdf4dbb.js.map